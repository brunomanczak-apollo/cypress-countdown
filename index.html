<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cypress â†’ Playwright Migration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --cypress-green: #69D3A7;
            --playwright-green: #45ba4b;
            --playwright-red: #d65348;
            --apollo-blue: #6366f1;
            --bg-dark: #0a0a0f;
            --bg-card: rgba(255, 255, 255, 0.03);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: var(--bg-dark);
            color: #fff;
            overflow: hidden;
            position: relative;
        }

        /* Animated gradient background */
        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(105, 211, 167, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(69, 186, 75, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 60%);
            animation: pulse 8s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* Grid pattern overlay */
        .grid-pattern {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 60px 60px;
            z-index: 1;
        }

        .container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 2rem;
            max-width: 900px;
        }

        /* Logo section */
        .logos {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .logo {
            height: 50px;
            width: auto;
            filter: brightness(1) drop-shadow(0 0 20px rgba(255, 255, 255, 0.1));
            transition: all 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.1);
            filter: brightness(1.2) drop-shadow(0 0 30px rgba(255, 255, 255, 0.2));
        }

        .logo-cypress {
            filter: brightness(0) invert(1) drop-shadow(0 0 20px rgba(105, 211, 167, 0.3));
        }

        .logo-cypress:hover {
            filter: brightness(0) invert(1) drop-shadow(0 0 30px rgba(105, 211, 167, 0.5));
        }

        .arrow {
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.4);
            animation: arrowPulse 2s ease-in-out infinite;
        }

        @keyframes arrowPulse {
            0%, 100% { transform: translateX(0); opacity: 0.4; }
            50% { transform: translateX(5px); opacity: 1; }
        }

        /* Heading */
        h1 {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #fff 0%, rgba(255, 255, 255, 0.7) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Countdown number */
        .countdown-wrapper {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .countdown-number {
            font-size: clamp(8rem, 25vw, 16rem);
            font-weight: 800;
            line-height: 1;
            background: linear-gradient(
                135deg, 
                var(--cypress-green) 0%, 
                var(--playwright-green) 50%,
                #2dd4bf 100%
            );
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 80px rgba(105, 211, 167, 0.4);
            animation: numberGlow 4s ease-in-out infinite;
            position: relative;
        }

        .countdown-number.complete {
            background: linear-gradient(
                135deg, 
                #fbbf24 0%, 
                #f59e0b 50%,
                #22c55e 100%
            );
            -webkit-background-clip: text;
            background-clip: text;
            animation: celebrate 0.5s ease-in-out infinite;
        }

        @keyframes numberGlow {
            0%, 100% { filter: drop-shadow(0 0 60px rgba(105, 211, 167, 0.3)); }
            50% { filter: drop-shadow(0 0 100px rgba(69, 186, 75, 0.5)); }
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* Description */
        .description {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-weight: 300;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-bottom: 4rem;
        }

        /* Celebration message */
        .celebration-message {
            display: none;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 600;
            background: linear-gradient(135deg, #fbbf24 0%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
            animation: fadeInUp 0.6s ease-out;
        }

        .celebration-message.show {
            display: block;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Apollo section */
        .apollo-section {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem 1.2rem;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .apollo-section:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
        }

        .apollo-logo {
            height: 24px;
            width: auto;
        }

        .apollo-text {
            font-size: 0.85rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.8);
            white-space: nowrap;
        }

        .apollo-text strong {
            color: var(--apollo-blue);
            font-weight: 600;
        }

        /* Progress bar */
        .progress-section {
            width: 100%;
            max-width: 400px;
            margin: 0 auto 2rem;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .progress-percent {
            font-weight: 600;
            font-size: 1.1rem;
            background: linear-gradient(90deg, var(--cypress-green), var(--playwright-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            height: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--cypress-green), var(--playwright-green));
            border-radius: 100px;
            transition: width 0.5s ease;
        }

        /* Team pride badge */
        .pride-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 1rem;
        }

        .pride-badge .emoji {
            font-size: 1.1rem;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .apollo-section {
                bottom: 1rem;
                right: 1rem;
                left: 1rem;
                justify-content: center;
            }

            .logos {
                gap: 1rem;
            }

            .logo {
                height: 35px;
            }

            .arrow {
                font-size: 1.5rem;
            }
        }

        /* Floating particles */
        .particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: rgba(105, 211, 167, 0.3);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
            z-index: 2;
        }

        @keyframes float {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }

        /* Floating side banners - DVD style bouncing */
        .floating-banner {
            position: fixed;
            padding: 0.6rem 1.2rem;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            z-index: 50;
            white-space: nowrap;
            pointer-events: none;
        }

        /* DVD-style bounce animations - each banner has unique path */
        .banner-left-1 {
            animation: dvdBounce1 80s linear infinite;
        }
        .banner-left-2 {
            animation: dvdBounce2 95s linear infinite;
        }
        .banner-left-3 {
            animation: dvdBounce3 70s linear infinite;
        }
        .banner-right-1 {
            animation: dvdBounce4 85s linear infinite;
        }

        @keyframes dvdBounce1 {
            0% { top: 10%; left: 2%; }
            15% { top: 60%; left: 15%; }
            30% { top: 25%; left: 5%; }
            45% { top: 70%; left: 20%; }
            60% { top: 15%; left: 8%; }
            75% { top: 55%; left: 3%; }
            90% { top: 35%; left: 18%; }
            100% { top: 10%; left: 2%; }
        }

        @keyframes dvdBounce2 {
            0% { top: 45%; left: 3%; }
            12% { top: 15%; left: 12%; }
            25% { top: 65%; left: 5%; }
            37% { top: 30%; left: 20%; }
            50% { top: 75%; left: 8%; }
            62% { top: 20%; left: 3%; }
            75% { top: 50%; left: 15%; }
            87% { top: 10%; left: 6%; }
            100% { top: 45%; left: 3%; }
        }

        @keyframes dvdBounce3 {
            0% { top: 70%; left: 5%; }
            14% { top: 20%; left: 18%; }
            28% { top: 55%; left: 2%; }
            42% { top: 12%; left: 10%; }
            57% { top: 65%; left: 22%; }
            71% { top: 35%; left: 4%; }
            85% { top: 80%; left: 15%; }
            100% { top: 70%; left: 5%; }
        }

        @keyframes dvdBounce4 {
            0% { top: 20%; right: 2%; left: auto; }
            16% { top: 70%; right: 18%; left: auto; }
            33% { top: 30%; right: 5%; left: auto; }
            50% { top: 60%; right: 22%; left: auto; }
            66% { top: 15%; right: 8%; left: auto; }
            83% { top: 75%; right: 3%; left: auto; }
            100% { top: 20%; right: 2%; left: auto; }
        }

        /* Serious/prominent banner - slower, more dignified movement */
        .floating-banner.serious {
            background: linear-gradient(135deg, rgba(69, 186, 75, 0.15) 0%, rgba(34, 197, 94, 0.1) 100%);
            border: 1px solid rgba(69, 186, 75, 0.4);
            color: #fff;
            font-size: 0.95rem;
            font-weight: 600;
            padding: 1rem 1.5rem;
            max-width: 200px;
            white-space: normal;
            text-align: center;
            line-height: 1.4;
            box-shadow: 0 0 30px rgba(69, 186, 75, 0.2);
            animation: dvdBounceSerious 120s linear infinite;
        }

        @keyframes dvdBounceSerious {
            0% { top: 30%; right: 3%; left: auto; }
            10% { top: 60%; right: 15%; left: auto; }
            20% { top: 20%; right: 5%; left: auto; }
            30% { top: 70%; right: 20%; left: auto; }
            40% { top: 40%; right: 2%; left: auto; }
            50% { top: 65%; right: 12%; left: auto; }
            60% { top: 25%; right: 8%; left: auto; }
            70% { top: 55%; right: 18%; left: auto; }
            80% { top: 15%; right: 4%; left: auto; }
            90% { top: 50%; right: 10%; left: auto; }
            100% { top: 30%; right: 3%; left: auto; }
        }

        .floating-banner.serious .stat {
            display: block;
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #45ba4b 0%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.3rem;
        }

        /* Warning/alert banner - red, fixed bottom left */
        .floating-banner.warning {
            background: linear-gradient(135deg, rgba(220, 38, 38, 0.2) 0%, rgba(185, 28, 28, 0.15) 100%);
            border: 2px solid rgba(239, 68, 68, 0.6);
            color: #fff;
            font-size: 1.1rem;
            font-weight: 700;
            padding: 1.2rem 1.8rem;
            max-width: 280px;
            white-space: normal;
            text-align: center;
            line-height: 1.4;
            box-shadow: 0 0 40px rgba(239, 68, 68, 0.3);
            animation: none;
            bottom: 2rem;
            left: 2rem;
            top: auto;
            right: auto;
        }

        .floating-banner.warning .warning-title {
            display: block;
            font-size: 1.1rem;
            font-weight: 700;
            color: #fca5a5;
            margin-bottom: 0.6rem;
        }

        .floating-banner.warning .warning-sub {
            display: block;
            font-size: 0.85rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 0.5rem;
        }

        .floating-banner.warning .warning-sub strong {
            color: #fca5a5;
            font-weight: 600;
        }

        /* Hide banners on mobile */
        @media (max-width: 1024px) {
            .floating-banner {
                display: none;
            }
        }

        /* Game button */
        .game-btn {
            position: fixed;
            bottom: 3rem;
            left: 50%;
            transform: translateX(-50%);
            padding: 1.2rem 3rem;
            font-family: 'Press Start 2P', 'Outfit', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: #fff;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.4) 0%, rgba(139, 92, 246, 0.3) 100%);
            border: 2px solid rgba(99, 102, 241, 0.6);
            border-radius: 12px;
            cursor: pointer;
            z-index: 100;
            animation: gameButtonPulse 2s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.3);
        }

        @keyframes gameButtonPulse {
            0%, 100% { 
                transform: translateX(-50%) scale(1); 
                box-shadow: 0 0 30px rgba(99, 102, 241, 0.3);
            }
            50% { 
                transform: translateX(-50%) scale(1.08); 
                box-shadow: 0 0 50px rgba(99, 102, 241, 0.5);
            }
        }

        .game-btn:hover {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.6) 0%, rgba(139, 92, 246, 0.5) 100%);
            border-color: rgba(99, 102, 241, 1);
            animation: gameButtonPulse 0.5s ease-in-out infinite;
        }

        /* Game container */
        .game-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 10000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .game-container.active {
            display: flex;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            width: 600px;
            padding: 1rem;
            font-family: 'Press Start 2P', 'Courier New', monospace;
            color: #fff;
            font-size: 14px;
        }

        .game-canvas {
            border: 2px solid #69D3A7;
            box-shadow: 0 0 30px rgba(105, 211, 167, 0.3);
        }

        .game-over-screen, .game-win-screen {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #fff;
            font-family: 'Press Start 2P', 'Courier New', monospace;
        }

        .game-over-screen h2, .game-win-screen h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .game-win-screen h2 {
            color: #69D3A7;
            text-shadow: 0 0 20px rgba(105, 211, 167, 0.8);
        }

        .game-over-screen h2 {
            color: #ef4444;
            text-shadow: 0 0 20px rgba(239, 68, 68, 0.8);
        }

        .game-over-screen p, .game-win-screen p {
            font-size: 0.8rem;
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .game-btn-restart {
            padding: 1rem 2rem;
            font-family: 'Press Start 2P', 'Courier New', monospace;
            font-size: 0.8rem;
            color: #000;
            background: #69D3A7;
            border: none;
            cursor: pointer;
            margin: 0.5rem;
        }

        .game-btn-restart:hover {
            background: #45ba4b;
        }

        .game-btn-exit {
            padding: 1rem 2rem;
            font-family: 'Press Start 2P', 'Courier New', monospace;
            font-size: 0.8rem;
            color: #fff;
            background: transparent;
            border: 2px solid #fff;
            cursor: pointer;
            margin: 0.5rem;
        }

        .game-btn-exit:hover {
            background: rgba(255, 255, 255, 0.1);
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div class="bg-gradient"></div>
    <div class="grid-pattern"></div>

    <!-- Floating particles -->
    <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
    <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
    <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
    <div class="particle" style="left: 50%; animation-delay: 1s;"></div>
    <div class="particle" style="left: 70%; animation-delay: 3s;"></div>
    <div class="particle" style="left: 85%; animation-delay: 5s;"></div>
    <div class="particle" style="left: 95%; animation-delay: 2.5s;"></div>

    <!-- Floating side banners - DVD bounce style -->
    <div class="floating-banner banner-left-1">much fast</div>
    <div class="floating-banner banner-left-2">much stable</div>
    <div class="floating-banner banner-left-3">much modern</div>
    <div class="floating-banner banner-right-1">no vendor lock-in</div>
    
    <!-- Serious stats banner -->
    <div class="floating-banner serious">
        <span class="stat">21%</span>
        speed improvement measured on Prod deployment
    </div>

    <!-- Warning banner - flaky tests -->
    <div class="floating-banner warning">
        <span class="warning-title">Temporary spike of flaky tests under control</span>
        <span class="warning-sub">Reach out to <strong>#squad-sdet</strong> if your squad needs support</span>
    </div>

    <div class="container">
        <!-- Logos -->
        <div class="logos">
            <img src="https://cdn.brandfetch.io/idIq_kF0rb/theme/dark/logo.svg?c=1bxid64Mup7aczewSAYMX&t=1667565307270" alt="Cypress" class="logo logo-cypress">
            <span class="arrow">â†’</span>
            <img src="https://playwright.dev/img/playwright-logo.svg" alt="Playwright" class="logo logo-playwright">
        </div>

        <!-- Heading -->
        <h1>Cypress migration to Playwright</h1>

        <!-- Countdown -->
        <div class="countdown-wrapper">
            <!-- HERE IS THE COUNTDOWN NUMBER -->
            <div class="countdown-number" id="countdown">8</div>
            <!-- HERE IS THE COUNTDOWN NUMBER -->
        </div>
        <p class="description">Cypress test files left</p>

        <!-- Celebration message (shown when complete) -->
        <p class="celebration-message" id="celebration">ðŸŽ‰ Migration Complete! ðŸŽ‰</p>

        <!-- Progress indicator -->
        <div class="progress-section">
            <div class="progress-label">
                <span>Migration progress</span>
                <span class="progress-percent" id="progressPercent">0%</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
            </div>
        </div>

        <!-- Team pride -->
        <div class="pride-badge">
            <span class="emoji">ðŸ’ª</span>
            <span>Built with pride by QE team</span>
            <span class="emoji">ðŸš€</span>
        </div>

        <!-- Game button -->
        <button class="game-btn" onclick="startGame()">Start Game</button>
    </div>

    <!-- Apollo section -->
    <a href="https://apollo.io/" target="_blank" rel="noopener noreferrer" class="apollo-section">
        <img src="https://cdn.brandfetch.io/idY56OZ9sE/w/400/h/400/theme/dark/icon.jpeg?c=1bxid64Mup7aczewSAYMX&t=1766615615875" alt="Apollo" class="apollo-logo">
        <span class="apollo-text"><strong>The future is now!</strong></span>
    </a>

    <!-- Game container -->
    <div class="game-container" id="gameContainer">
        <div class="game-header">
            <span>SCORE: <span id="gameScore">0</span>/50</span>
            <span>CYPRESS DESTROYER</span>
            <button class="game-btn-exit" onclick="exitGame()">EXIT</button>
        </div>
        <canvas id="gameCanvas" class="game-canvas" width="600" height="500"></canvas>
        
        <div class="game-win-screen" id="gameWinScreen">
            <h2>YOU FINISHED THEM ALL!</h2>
            <p>All Cypress tests have been migrated to Playwright!</p>
            <button class="game-btn-restart" onclick="restartGame()">PLAY AGAIN</button>
            <button class="game-btn-exit" onclick="exitGame()">EXIT</button>
        </div>

        <div class="game-over-screen" id="gameOverScreen">
            <h2>GAME OVER</h2>
            <p>The Cypress tests have invaded! Migration failed...</p>
            <button class="game-btn-restart" onclick="restartGame()">TRY AGAIN</button>
            <button class="game-btn-exit" onclick="exitGame()">EXIT</button>
        </div>
    </div>

    <script>
        // Configuration - change this number to update the countdown
        const TOTAL_TESTS = 423; // Total tests to migrate
        const CURRENT_COUNT = 8; // Current remaining tests - EDIT HERE TO UPDATE THE COUNTDOWN NUMBER
        
        // DOM elements
        const countdownEl = document.getElementById('countdown');
        const celebrationEl = document.getElementById('celebration');
        const progressBar = document.getElementById('progressBar');
        const progressPercent = document.getElementById('progressPercent');
        
        // Calculate progress
        const progress = ((TOTAL_TESTS - CURRENT_COUNT) / TOTAL_TESTS) * 100;
        const progressRounded = Math.round(progress * 10) / 10; // Round to 1 decimal
        progressBar.style.width = `${Math.min(progress, 100)}%`;
        progressPercent.textContent = `${progressRounded}%`;

        // Check if migration is complete
        function checkComplete() {
            const count = parseInt(countdownEl.textContent);
            
            if (count === 0) {
                // Add celebration class
                countdownEl.classList.add('complete');
                celebrationEl.classList.add('show');
                progressBar.style.width = '100%';
                progressPercent.textContent = '100%';
                
                // Start continuous confetti
                startConfetti();
            }
        }

        // Confetti configuration
        function startConfetti() {
            const duration = Infinity;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 1000 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                const particleCount = 50;
                
                // Confetti from the left
                confetti({
                    ...defaults,
                    particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 },
                    colors: ['#69D3A7', '#45ba4b', '#fbbf24', '#22c55e', '#6366f1']
                });
                
                // Confetti from the right
                confetti({
                    ...defaults,
                    particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 },
                    colors: ['#69D3A7', '#45ba4b', '#fbbf24', '#22c55e', '#6366f1']
                });
            }, 250);
        }

        // Initial check
        checkComplete();

        // ============================================
        // CYPRESS DESTROYER - Space Invaders Game
        // ============================================
        
        let gameActive = false;
        let gameLoop = null;
        let score = 0;
        const WINNING_SCORE = 50;
        
        // Game objects
        let player = { x: 270, y: 450, width: 60, height: 40, speed: 8 };
        let bullets = [];
        let aliens = [];
        let alienDirection = 1;
        let alienSpeed = 0.4;
        let keys = {};
        
        // Cypress test file names for aliens
        const cypressFiles = [
            'login.cy.js', 'auth.cy.js', 'cart.cy.js', 'api.cy.js', 'user.cy.js',
            'home.cy.js', 'nav.cy.js', 'form.cy.js', 'test.cy.js', 'spec.cy.js'
        ];
        
        function startGame() {
            document.getElementById('gameContainer').classList.add('active');
            document.getElementById('gameWinScreen').style.display = 'none';
            document.getElementById('gameOverScreen').style.display = 'none';
            score = 0;
            document.getElementById('gameScore').textContent = score;
            
            // Reset game state
            player = { x: 270, y: 450, width: 60, height: 40, speed: 8 };
            bullets = [];
            aliens = [];
            alienDirection = 1;
            alienSpeed = 0.4;
            
            // Create aliens (5 rows x 10 columns = 50 aliens)
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 10; col++) {
                    aliens.push({
                        x: 50 + col * 55,
                        y: 50 + row * 45,
                        width: 50,
                        height: 30,
                        alive: true,
                        file: cypressFiles[col % cypressFiles.length]
                    });
                }
            }
            
            gameActive = true;
            
            // Key listeners
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);
            
            // Start game loop
            gameLoop = requestAnimationFrame(updateGame);
        }
        
        function handleKeyDown(e) {
            keys[e.key] = true;
            if (e.key === ' ' || e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                e.preventDefault();
            }
        }
        
        function handleKeyUp(e) {
            keys[e.key] = false;
        }
        
        function shoot() {
            if (bullets.length < 5) { // Limit bullets on screen
                bullets.push({
                    x: player.x + player.width / 2 - 3,
                    y: player.y,
                    width: 6,
                    height: 15,
                    speed: 10
                });
            }
        }
        
        let lastShot = 0;
        function updateGame(timestamp) {
            if (!gameActive) return;
            
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.fillStyle = '#0a0a0f';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw starfield background
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            for (let i = 0; i < 50; i++) {
                const x = (i * 73 + timestamp * 0.01) % canvas.width;
                const y = (i * 51) % canvas.height;
                ctx.fillRect(x, y, 2, 2);
            }
            
            // Player movement
            if (keys['ArrowLeft'] && player.x > 0) {
                player.x -= player.speed;
            }
            if (keys['ArrowRight'] && player.x < canvas.width - player.width) {
                player.x += player.speed;
            }
            if (keys[' '] && timestamp - lastShot > 200) {
                shoot();
                lastShot = timestamp;
            }
            
            // Draw player (Apollo ship)
            ctx.fillStyle = '#6366f1';
            ctx.beginPath();
            ctx.moveTo(player.x + player.width / 2, player.y);
            ctx.lineTo(player.x, player.y + player.height);
            ctx.lineTo(player.x + player.width, player.y + player.height);
            ctx.closePath();
            ctx.fill();
            
            // Apollo logo on ship
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 10px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('APOLLO', player.x + player.width / 2, player.y + player.height - 8);
            
            // Update and draw bullets
            bullets = bullets.filter(bullet => {
                bullet.y -= bullet.speed;
                
                // Draw bullet
                ctx.fillStyle = '#22c55e';
                ctx.shadowColor = '#22c55e';
                ctx.shadowBlur = 10;
                ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
                ctx.shadowBlur = 0;
                
                return bullet.y > -bullet.height;
            });
            
            // Move aliens
            let hitEdge = false;
            aliens.forEach(alien => {
                if (alien.alive) {
                    if (alien.x <= 0 || alien.x >= canvas.width - alien.width) {
                        hitEdge = true;
                    }
                }
            });
            
            if (hitEdge) {
                alienDirection *= -1;
                aliens.forEach(alien => {
                    alien.y += 20;
                });
            }
            
            // Update and draw aliens
            let alienReachedBottom = false;
            aliens.forEach(alien => {
                if (alien.alive) {
                    alien.x += alienSpeed * alienDirection;
                    
                    // Check if alien reached bottom
                    if (alien.y + alien.height >= player.y) {
                        alienReachedBottom = true;
                    }
                    
                    // Draw alien (Cypress test file)
                    ctx.fillStyle = '#69D3A7';
                    ctx.fillRect(alien.x, alien.y, alien.width, alien.height);
                    
                    // Cypress "C" logo
                    ctx.fillStyle = '#0a0a0f';
                    ctx.font = 'bold 14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('CY', alien.x + alien.width / 2, alien.y + 20);
                    
                    // Check collision with bullets
                    bullets.forEach((bullet, bulletIndex) => {
                        if (bullet.x < alien.x + alien.width &&
                            bullet.x + bullet.width > alien.x &&
                            bullet.y < alien.y + alien.height &&
                            bullet.y + bullet.height > alien.y) {
                            alien.alive = false;
                            bullets.splice(bulletIndex, 1);
                            score++;
                            document.getElementById('gameScore').textContent = score;
                            
                            // Check win condition
                            if (score >= WINNING_SCORE) {
                                winGame();
                            }
                        }
                    });
                }
            });
            
            // Check game over condition
            if (alienReachedBottom) {
                gameOver();
                return;
            }
            
            // Draw score
            ctx.fillStyle = '#fff';
            ctx.font = '12px "Press Start 2P", monospace';
            ctx.textAlign = 'left';
            ctx.fillText('Arrow keys to move, SPACE to shoot', 10, canvas.height - 10);
            
            // Continue game loop
            if (gameActive) {
                gameLoop = requestAnimationFrame(updateGame);
            }
        }
        
        function winGame() {
            gameActive = false;
            cancelAnimationFrame(gameLoop);
            document.getElementById('gameWinScreen').style.display = 'block';
            
            // Victory confetti
            confetti({
                particleCount: 200,
                spread: 100,
                origin: { y: 0.6 },
                colors: ['#69D3A7', '#45ba4b', '#6366f1', '#fbbf24']
            });
        }
        
        function gameOver() {
            gameActive = false;
            cancelAnimationFrame(gameLoop);
            document.getElementById('gameOverScreen').style.display = 'block';
        }
        
        function restartGame() {
            startGame();
        }
        
        function exitGame() {
            gameActive = false;
            cancelAnimationFrame(gameLoop);
            document.removeEventListener('keydown', handleKeyDown);
            document.removeEventListener('keyup', handleKeyUp);
            document.getElementById('gameContainer').classList.remove('active');
            keys = {};
        }
    </script>
</body>
</html>
